!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("d3-queue",["exports"],t):t(n.d3_queue={})}(this,function(n){"use strict";function t(){}function r(n){function r(){if(!l)try{u()}catch(n){a[d+s-1]&&i(n)}}function u(){for(;l=h&&n>s;){var t=d+s,r=a[t],u=r.length-1,e=r[u];r[u]=f(t),--h,++s,r=e.apply(null,r),a[t]&&(a[t]=r||o)}}function f(n){return function(t,u){a[n]&&(--s,++d,a[n]=null,null==w&&(null!=t?i(t):(p[n]=u,h?r():s||y(w,p))))}}function i(n){var t,r=a.length;for(w=n,p=void 0,h=NaN;--r>=0;)if((t=a[r])&&(a[r]=null,t.abort))try{t.abort()}catch(n){}s=NaN,y(w,p)}if(!(n>=1))throw new Error;var c,l,a=[],p=[],h=0,s=0,d=0,w=null,y=t;return c={defer:function(n){if("function"!=typeof n||y!==t)throw new Error;if(null!=w)return c;var u=e.call(arguments,1);return u.push(n),++h,a.push(u),r(),c},abort:function(){return null==w&&i(new Error("abort")),c},await:function(n){if("function"!=typeof n||y!==t)throw new Error;return y=function(t,r){n.apply(null,[t].concat(r))},s||y(w,p),c},awaitAll:function(n){if("function"!=typeof n||y!==t)throw new Error;return y=n,s||y(w,p),c}}}function u(n){return r(arguments.length?+n:1/0)}var e=[].slice,o={},f="2.0.0";n.version=f,n.queue=u});